---
layout: page
title: Advanced ActiveRecord
length: 180
tags: rails, active record
---

Student-Facing Lesson: https://backend.turing.io/module3/lessons/advanced_activerecord

## Objective
* For the lesson, it's nice to use a different query than the one in the lesson plan so students aren't tempted to reference the lesson plan and get the answers without struggling.
* The query below is a query that was originally in the rales engine project, but was removed in order to reduce the scope of the project. It is very similar to the other business intelligence queries that are required for the project... but just different enough :).

```
Find the 5 the top 5 merchants ranked by total number of items sold.
```

## Lecture


* Give students some time to sketch things out on their own or in pairs before creating the diagram as a group. The warmup is a great place to do this.

* After they have had time to work on the diagram on their own, call on individual students to pick a thing to make note of on the diagram. Having the students drive what is added to the diagram seems to create engagement.

## Workshop

* Divide students into groups of four-ish.
* Have each group pick a business intelligence problem to work on. Preferably, each group will pick a different problem.
* Each group should practice what we demonstrated in the morning class:
  * Diagram their understanding of the problem. Include database tables and required columns.
  * Include SQL functions, techniques, and aggregate functions.
  * The raw sql statement to construct the query (optional)
* Students should create the active record query on their own.
* With the last 5 minutes of the session have the students walk around the room and review the different diagrams. Keep these diagrams up for the rest of the week, or have them take pictures and add them to the slack channel, so questions can be threaded on each picture.
